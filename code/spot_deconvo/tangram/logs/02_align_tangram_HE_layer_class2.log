Adding LIBD modules
Loading git
Loading LIBD module for git-status-size/github
Loading LIBD module for git-lfs/2.8.0
Loading LIBD module for rmate/1.5.9
Loading LIBD module for ruby/2.6.4p104
Loading conda_R/4.1.x
**** Job starts ****
Thu Sep 14 15:59:56 EDT 2023
**** JHPCE info ****
User: mtippani
Job id: 3721569
Job name: align_tangram_HE
Hostname: compute-126.cm.cluster
Task id: 2
Loading LIBD module for tangram/1.0.2
INFO:root:Allocate tensors for mapping.
INFO:root:Begin training with 464 genes and customized density_prior in constrained mode...
Using tangram version: 1.0.2
Only using spatial sample V11A20-297_B1.
Re-aligning in "deconvolution mode"...
Traceback (most recent call last):
  File "02_align_HE.py", line 79, in <module>
    ad_map = tg.map_cells_to_space(
  File "/jhpce/shared/jhpce/libd/tangram/1.0.2/tangram_env/lib/python3.8/site-packages/tangram/mapping_utils.py", line 337, in map_cells_to_space
    mapper = mo.MapperConstrained(
  File "/jhpce/shared/jhpce/libd/tangram/1.0.2/tangram_env/lib/python3.8/site-packages/tangram/mapping_optimizer.py", line 240, in __init__
    self.S = torch.tensor(S, device=device, dtype=torch.float32)
RuntimeError: CUDA out of memory. Tried to allocate 124.00 MiB (GPU 0; 79.10 GiB total capacity; 0 bytes already allocated; 77.46 GiB free; 0 bytes reserved in total by PyTorch)
**** Job ends ****
Thu Sep 14 16:16:50 EDT 2023
Adding LIBD modules
Loading git
Loading LIBD module for git-status-size/github
Loading LIBD module for git-lfs/2.8.0
Loading LIBD module for rmate/1.5.9
Loading LIBD module for ruby/2.6.4p104
Loading conda_R/4.1.x
**** Job starts ****
Thu Sep 14 16:23:51 EDT 2023
**** JHPCE info ****
User: mtippani
Job id: 3721591
Job name: align_tangram_HE
Hostname: compute-126.cm.cluster
Task id: 2
Loading LIBD module for tangram/1.0.2
INFO:root:Allocate tensors for mapping.
INFO:root:Begin training with 464 genes and customized density_prior in constrained mode...
INFO:root:Saving results..
INFO:root:spatial prediction dataframe is saved in `obsm` `tangram_ct_pred` of the spatial AnnData.
Using tangram version: 1.0.2
Only using spatial sample V11A20-297_B1.
Re-aligning in "deconvolution mode"...
Score: 0.144, KL reg: 0.494, Count reg: 11305.430, Lambda f reg: 14426.961
Score: 0.612, KL reg: 0.022, Count reg: 7.062, Lambda f reg: 2202.481
Score: 0.637, KL reg: 0.014, Count reg: 1.994, Lambda f reg: 607.494
Score: 0.641, KL reg: 0.014, Count reg: 1.031, Lambda f reg: 380.456
Score: 0.643, KL reg: 0.014, Count reg: 0.238, Lambda f reg: 305.773
Score: 0.644, KL reg: 0.014, Count reg: 0.627, Lambda f reg: 266.878
Score: 0.645, KL reg: 0.014, Count reg: 0.363, Lambda f reg: 242.608
Score: 0.645, KL reg: 0.014, Count reg: 0.018, Lambda f reg: 220.263
Score: 0.646, KL reg: 0.014, Count reg: 1.666, Lambda f reg: 204.339
Score: 0.646, KL reg: 0.014, Count reg: 0.867, Lambda f reg: 195.221
Projecting annotation and plotting AUC...
Saving AnnDatas...
Done all tasks.
**** Job ends ****
Thu Sep 14 17:21:39 EDT 2023
Adding LIBD modules
Loading git
Loading LIBD module for git-status-size/github
Loading LIBD module for git-lfs/2.8.0
Loading LIBD module for rmate/1.5.9
Loading LIBD module for ruby/2.6.4p104
Loading conda_R/4.1.x
**** Job starts ****
Fri Sep 15 23:02:55 EDT 2023
**** JHPCE info ****
User: mtippani
Job id: 3722441
Job name: align_tangram_HE
Hostname: compute-126.cm.cluster
Task id: 2
Loading LIBD module for tangram/1.0.2
INFO:root:Allocate tensors for mapping.
INFO:root:Begin training with 464 genes and customized density_prior in constrained mode...
INFO:root:Saving results..
INFO:root:spatial prediction dataframe is saved in `obsm` `tangram_ct_pred` of the spatial AnnData.
Using tangram version: 1.0.2
Only using spatial sample V11A20-297_B1.
Re-aligning in "deconvolution mode"...
Score: 0.144, KL reg: 0.494, Count reg: 10820.672, Lambda f reg: 14254.646
Score: 0.609, KL reg: 0.022, Count reg: 9.531, Lambda f reg: 2191.141
Score: 0.635, KL reg: 0.014, Count reg: 0.852, Lambda f reg: 590.752
Score: 0.639, KL reg: 0.014, Count reg: 0.729, Lambda f reg: 354.405
Score: 0.640, KL reg: 0.014, Count reg: 0.172, Lambda f reg: 284.144
Score: 0.641, KL reg: 0.014, Count reg: 1.348, Lambda f reg: 249.063
Score: 0.642, KL reg: 0.014, Count reg: 0.254, Lambda f reg: 229.113
Score: 0.642, KL reg: 0.014, Count reg: 1.551, Lambda f reg: 210.632
Score: 0.643, KL reg: 0.014, Count reg: 1.680, Lambda f reg: 195.008
Score: 0.643, KL reg: 0.014, Count reg: 2.809, Lambda f reg: 186.410
Projecting annotation and plotting AUC...
Saving AnnDatas...
Done all tasks.
**** Job ends ****
Fri Sep 15 23:54:01 EDT 2023
Adding LIBD modules
Loading git
Loading LIBD module for git-status-size/github
Loading LIBD module for git-lfs/2.8.0
Loading LIBD module for rmate/1.5.9
Loading LIBD module for ruby/2.6.4p104
Loading conda_R/4.1.x
**** Job starts ****
Mon Oct  2 14:35:48 EDT 2023
**** JHPCE info ****
User: mtippani
Job id: 3749012
Job name: align_tangram_HE
Hostname: compute-126.cm.cluster
Task id: 2
Loading LIBD module for tangram/1.0.2
Using tangram version: 1.0.2
Only using spatial sample V11A20-297_B1.
Traceback (most recent call last):
  File "02_align_HE.py", line 72, in <module>
    ad_sp = sc.read_h5ad(str(sp_path_in).format(sample_name))
  File "/jhpce/shared/jhpce/libd/tangram/1.0.2/tangram_env/lib/python3.8/site-packages/anndata/_io/h5ad.py", line 224, in read_h5ad
    with h5py.File(filename, "r") as f:
  File "/jhpce/shared/jhpce/libd/tangram/1.0.2/tangram_env/lib/python3.8/site-packages/h5py/_hl/files.py", line 533, in __init__
    fid = make_fid(name, mode, userblock_size, fapl, fcpl, swmr=swmr)
  File "/jhpce/shared/jhpce/libd/tangram/1.0.2/tangram_env/lib/python3.8/site-packages/h5py/_hl/files.py", line 226, in make_fid
    fid = h5f.open(name, flags, fapl=fapl)
  File "h5py/_objects.pyx", line 54, in h5py._objects.with_phil.wrapper
  File "h5py/_objects.pyx", line 55, in h5py._objects.with_phil.wrapper
  File "h5py/h5f.pyx", line 106, in h5py.h5f.open
FileNotFoundError: [Errno 2] Unable to open file (unable to open file: name = '/dcs04/lieber/lcolladotor/spatialHPC_LIBD4035/spatial_hpc/code/spot_deconvo/tangram/../../../processed-data/spot_deconvo/tangram/IF/2ndRun_newClass/layer/V11A20-297_B1/ad_sp_orig.h5ad', errno = 2, error message = 'No such file or directory', flags = 0, o_flags = 0)
**** Job ends ****
Mon Oct  2 14:35:53 EDT 2023
